# 健康管理应用 - 项目启动指南

## 前置要求

1. **Python 3.8+** - 用于运行FastAPI后端
2. **Node.js 16+** - 用于运行Vue前端
3. **MySQL 5.7+** - 数据库
4. **Android Studio** - 用于开发Android应用（可选）

## 第一步：数据库初始化

1. 确保MySQL服务正在运行
2. 进入后端目录：
```bash
cd 后端/fastApiProject
```

3. 运行数据库初始化脚本：
```bash
python init_db.py
```

这将创建 `health_app` 数据库（如果不存在）。

## 第二步：启动后端服务

1. 安装Python依赖：
```bash
cd 后端/fastApiProject
pip install -r requirements.txt
```

2. 启动FastAPI服务：
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

3. 验证服务运行：
   - 访问 http://localhost:8000 查看欢迎信息
   - 访问 http://localhost:8000/docs 查看API文档

## 第三步：启动Web前端

1. 进入前端目录：
```bash
cd web端
```

2. 安装依赖：
```bash
npm install
```

3. 启动开发服务器：
```bash
npm run dev
```

4. 访问应用：
   - 打开浏览器访问 http://localhost:5173

## 第四步：运行Android应用

### 准备工作

1. 打开Android Studio
2. 打开项目中的 `app/` 目录
3. 等待Gradle同步完成

### 配置API地址

在 `app/app/src/main/java/com/example/myapplication/api/ApiClient.kt` 中：

- **Android模拟器**：使用 `http://10.0.2.2:8000/api/v1/`
- **真机调试**：使用你的电脑IP地址，例如 `http://192.168.1.100:8000/api/v1/`

### 创建布局文件

Android应用需要以下布局XML文件，可以在Android Studio中创建：

**列表页面布局：**
- `fragment_recipes.xml` - 食谱列表
- `fragment_vitamins.xml` - 维生素列表
- `fragment_health_tips.xml` - 健康小贴士列表

**详情页面布局：**
- `fragment_recipe_detail.xml` - 食谱详情
- `fragment_vitamin_detail.xml` - 维生素详情
- `fragment_health_tip_detail.xml` - 健康小贴士详情

**列表项布局：**
- `item_recipe.xml` - 食谱列表项
- `item_vitamin.xml` - 维生素列表项
- `item_health_tip.xml` - 健康小贴士列表项

### 运行应用

1. 连接Android设备或启动模拟器
2. 点击运行按钮或按 `Shift+F10`
3. 应用将安装并启动

## 测试数据

可以通过以下方式添加测试数据：

1. **使用API文档界面**：
   - 访问 http://localhost:8000/docs
   - 使用Swagger UI测试API

2. **使用Web后台管理**：
   - 访问 http://localhost:5173/admin
   - 添加食谱、维生素和健康小贴士

3. **直接使用API**：
```bash
# 创建食谱示例
curl -X POST "http://localhost:8000/api/v1/recipes" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "健康早餐",
    "description": "营养丰富的早餐",
    "ingredients": "[\"鸡蛋\", \"全麦面包\", \"牛奶\"]",
    "steps": "[\"打散鸡蛋\", \"煎蛋\", \"烤面包\", \"完成\"]",
    "category": "早餐",
    "difficulty": "简单",
    "calories": 350.0
  }'
```

## 常见问题

### 1. 数据库连接失败

- 检查MySQL服务是否运行
- 确认数据库配置（用户名、密码、端口）
- 检查防火墙设置

### 2. 前端无法连接后端

- 确认后端服务正在运行
- 检查 `vite.config.js` 中的代理配置
- 确认CORS配置正确

### 3. Android应用无法连接API

- **模拟器**：使用 `10.0.2.2` 而不是 `localhost`
- **真机**：确保手机和电脑在同一网络
- 检查 `AndroidManifest.xml` 中的网络权限
- 确认 `usesCleartextTraffic` 设置为 `true`（仅开发环境）

### 4. 端口被占用

- 修改后端端口：`uvicorn main:app --port 8001`
- 修改前端端口：在 `vite.config.js` 中修改 `server.port`

## 下一步

1. 添加测试数据
2. 测试各个功能模块
3. 根据需要扩展功能
4. 准备生产环境部署

## 技术支持

如有问题，请检查：
- 后端日志输出
- 浏览器控制台（前端）
- Android Studio Logcat（Android应用）
- API文档：http://localhost:8000/docs

